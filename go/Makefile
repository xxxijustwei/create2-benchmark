# Go CREATE2 Benchmark (Optimized)

.PHONY: all build run test clean help

# é»˜è®¤ç›®æ ‡
all: build

# æ„å»ºå¯æ‰§è¡Œæ–‡ä»¶
build:
	@echo "ğŸ”¨ æ„å»ºç¨‹åº..."
	go mod tidy
	go build -ldflags="-s -w" -o bin/create2-benchmark .

# è¿è¡Œbenchmark
run: build
	@echo "ğŸš€ è¿è¡ŒCREATE2 benchmark..."
	./bin/create2-benchmark

# è¿è¡Œæµ‹è¯•
test:
	@echo "ğŸ§ª è¿è¡ŒCREATE2åœ°å€é¢„æµ‹æµ‹è¯•..."
	go mod tidy
	@echo "é¢„æµ‹åœ°å€: test-salt"
	@echo -n "ç»“æœ: "
	@go run . test

# æ¸…ç†æ„å»ºæ–‡ä»¶
clean:
	@echo "ğŸ§¹ æ¸…ç†æ„å»ºæ–‡ä»¶..."
	rm -rf bin/

# æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
help:
	@echo "å¯ç”¨çš„å‘½ä»¤ï¼š"
	@echo "  build - æ„å»ºå¯æ‰§è¡Œæ–‡ä»¶"
	@echo "  run   - è¿è¡ŒCREATE2 benchmark"
	@echo "  test  - è¿è¡ŒCREATE2åœ°å€é¢„æµ‹æµ‹è¯•"
	@echo "  clean - æ¸…ç†æ„å»ºæ–‡ä»¶"