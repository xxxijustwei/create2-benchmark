.PHONY: build run test benchmark clean help

# é»˜è®¤ç›®æ ‡
all: build

# æ„å»ºreleaseç‰ˆæœ¬
build:
	@echo "ğŸ”¨ æ„å»ºGPUåŠ é€Ÿç‰ˆæœ¬..."
	@cargo build --release

# è¿è¡ŒGPUåŠ é€Ÿbenchmark
run: build
	@echo "ğŸš€ è¿è¡ŒGPUåŠ é€Ÿbenchmark..."
	@cargo run --release

# è¿è¡Œå•æ¬¡æµ‹è¯•
test: build
	@echo "ğŸ§ª è¿è¡Œå•æ¬¡æµ‹è¯•éªŒè¯..."
	@cargo run --release -- test

# æ£€æŸ¥Metalæ”¯æŒ
check-metal:
	@echo "ğŸ” æ£€æŸ¥Metalæ”¯æŒ..."
	@system_profiler SPDisplaysDataType | grep "Metal"

# æ˜¾ç¤ºå¸®åŠ©
help:
	@echo "CREATE2 Benchmark - Rust GPU (Metal)"
	@echo ""
	@echo "å¯ç”¨å‘½ä»¤:"
	@echo "  make build       - æ„å»ºreleaseç‰ˆæœ¬"
	@echo "  make run         - è¿è¡ŒGPUåŠ é€Ÿbenchmark"
	@echo "  make test        - è¿è¡Œå•æ¬¡æµ‹è¯•éªŒè¯"
	@echo "  make check-metal - æ£€æŸ¥Metalæ”¯æŒ"
	@echo "  make help        - æ˜¾ç¤ºæ­¤å¸®åŠ©ä¿¡æ¯"